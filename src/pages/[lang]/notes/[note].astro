---
import type { GetStaticPaths } from 'astro'

import { getCollection } from 'astro:content'

import Container from '@/components/container.astro'
import { mdxComponents } from '@/components/mdx-components'
import TypographyH2 from '@/components/typography/TypographyH2.astro'
import { t } from '@/i18n'
import BaseLayout from '@/layouts/base-layout.astro'

const { note } = Astro.props

const { Content } = await note.render()

export const getStaticPaths = (async () => {
  const notes = await getCollection('notes')

  return notes.map(note => {
    const [lang, slugWithoutLang] = note.slug.split('/')

    return { params: { lang, note: slugWithoutLang }, props: { note } }
  })
}) satisfies GetStaticPaths
---

<BaseLayout title={`${note.data.title} â€“ ${t(Astro.currentLocale, 'fullName')}`}>
  <Container class="note-container">
    <TypographyH2>{note.data.title}</TypographyH2>
    <Content components={mdxComponents} />
  </Container>
</BaseLayout>

<style>
  @import '@/styles/mixins.css';
  @import '@/styles/media.css';

  .note-container {
    --max-width: var(--max-notes-text-width);
    padding-top: 3rem;
  }
</style>
